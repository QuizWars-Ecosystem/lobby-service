{{define "match_condition_chart"}}
    <div class="match-condition-chart"
         data-valid="{{.OverallValid}}"
         data-rating-diff="{{.RatingDiffValue}}"
         data-max-rating-diff="{{index $.Config.ServiceConfig.Matcher.Configs .Mode}}.MaxRatingDiff"
         data-category-match="{{.CategoryMatchValue}}"
         data-min-category-match="{{index $.Config.ServiceConfig.Matcher.Configs .Mode}}.MinCategoryMatch"
         onclick="showMatchDetails(this)">
        <div class="chart-container">
            <svg width="40" height="40" viewBox="0 0 40 40">
                <circle class="chart-background" cx="20" cy="20" r="15" fill="none" stroke="#eee" stroke-width="10"></circle>
                <circle class="chart-progress" cx="20" cy="20" r="15" fill="none"
                        stroke="{{if .OverallValid}}#4CAF50{{else}}#F44336{{end}}"
                        stroke-width="10"
                        stroke-dasharray="{{mul .CategoryMatchValue 100}} {{sub 100 (mul .CategoryMatchValue 100)}}"
                        transform="rotate(-90 20 20)"></circle>
                <text x="20" y="23" text-anchor="middle" font-size="10" fill="#333">
                    {{printf "%.0f" (mul .CategoryMatchValue 100)}}%
                </text>
            </svg>
        </div>
    </div>

    <div class="match-details-modal">
        <div class="modal-content">
            <h3>Match Conditions Details</h3>
            <table>
                <tr>
                    <th>Condition</th>
                    <th>Required</th>
                    <th>Actual</th>
                    <th>Status</th>
                </tr>
                <tr>
                    <td>Rating Diff</td>
                    <td>{{printf "%.0f" (index $.Config.ServiceConfig.Matcher.Configs .Mode).MaxRatingDiff}}</td>
                    <td>{{printf "%.0f" .RatingDiffValue}}</td>
                    <td><span class="badge {{if .RatingDiffValid}}badge-success{{else}}badge-danger{{end}}">
                    {{if .RatingDiffValid}}OK{{else}}FAIL{{end}}
                </span></td>
                </tr>
                <tr>
                    <td>Category Match</td>
                    <td>{{printf "%.0f" (mul (index $.Config.ServiceConfig.Matcher.Configs .Mode).MinCategoryMatch 100)}}%</td>
                    <td>{{printf "%.0f" (mul .CategoryMatchValue 100)}}%</td>
                    <td><span class="badge {{if .CategoryMatchValid}}badge-success{{else}}badge-danger{{end}}">
                    {{if .CategoryMatchValid}}OK{{else}}FAIL{{end}}
                </span></td>
                </tr>
            </table>
        </div>
    </div>
{{end}}